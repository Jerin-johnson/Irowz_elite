<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Address - My Account | Irowz Elite</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn-uicons.flaticon.com/uicons-regular-straight/css/uicons-regular-straight.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
    <%- include('../partials/_styles') %>
</head>
<body>
    <%- include('../partials/_header') %>
    
    <div class="container">
        <div class="row" style="display: flex; gap: 20px;">
            <!-- Sidebar -->
            <div class="col-md-3 sidebar" style="flex: 0 0 250px;">
                <%- include('../partials/_sidebar') %>
            </div>
            
            <!-- Main Content -->
            <div class="col-md-9 main-content" style="flex: 1; padding: 30px;">
                <!-- Breadcrumbs -->
                <%- include('../partials/_breadcrumbs', { currentPage: 'edit-address' }) %>

                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px;">
                    <h2 style="margin: 0; color: #333;">
                        Edit Address
                        <span class="default-badge">Default</span>
                    </h2>
                    <a href="/address" class="btn btn-outline-secondary">
                        <i class="fas fa-arrow-left"></i> Back to Address Book
                    </a>
                </div>

                <form action="/address/edit/1" method="POST" id="editAddressForm">
                    <input type="hidden" name="addressId" value="1">
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <!-- Personal Information -->
                        <div>
                            <label for="firstName" class="form-label">First Name *</label>
                            <input type="text" class="form-control" id="firstName" name="firstName" 
                                   value="John" required>
                        </div>
                        <div>
                            <label for="lastName" class="form-label">Last Name *</label>
                            <input type="text" class="form-control" id="lastName" name="lastName" 
                                   value="Doe" required>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label for="phone" class="form-label">Phone Number *</label>
                            <input type="tel" class="form-control" id="phone" name="phone" 
                                   value="(234) 567-8900" required>
                        </div>
                        <div>
                            <label for="email" class="form-label">Email (Optional)</label>
                            <input type="email" class="form-control" id="email" name="email" 
                                   value="john.doe@example.com">
                        </div>
                    </div>

                    <!-- Address Information -->
                    <h5 style="margin: 30px 0 20px; color: #333;">Address Information</h5>
                    
                    <div style="margin-bottom: 20px;">
                        <label for="addressLine1" class="form-label">Address Line 1 *</label>
                        <input type="text" class="form-control" id="addressLine1" name="addressLine1" 
                               value="123 Main Street" placeholder="House number, street name" required>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <label for="addressLine2" class="form-label">Address Line 2 (Optional)</label>
                        <input type="text" class="form-control" id="addressLine2" name="addressLine2" 
                               value="Apt 4B" placeholder="Apartment, suite, unit, building, floor, etc.">
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label for="city" class="form-label">City *</label>
                            <input type="text" class="form-control" id="city" name="city" 
                                   value="New York" required>
                        </div>
                        <div>
                            <label for="state" class="form-label">State/Province *</label>
                            <select class="form-select" id="state" name="state" required>
                                <option value="">Select State</option>
                                <option value="AL">Alabama</option>
                                <option value="AK">Alaska</option>
                                <option value="AZ">Arizona</option>
                                <option value="AR">Arkansas</option>
                                <option value="CA">California</option>
                                <option value="CO">Colorado</option>
                                <option value="CT">Connecticut</option>
                                <option value="DE">Delaware</option>
                                <option value="FL">Florida</option>
                                <option value="GA">Georgia</option>
                                <option value="NY" selected>New York</option>
                                <!-- Add more states as needed -->
                            </select>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <label for="zipCode" class="form-label">ZIP/Postal Code *</label>
                            <input type="text" class="form-control" id="zipCode" name="zipCode" 
                                   value="10001" required>
                        </div>
                        <div>
                            <label for="country" class="form-label">Country *</label>
                            <select class="form-select" id="country" name="country" required>
                                <option value="">Select Country</option>
                                <option value="US" selected>United States</option>
                                <option value="CA">Canada</option>
                                <option value="MX">Mexico</option>
                                <!-- Add more countries as needed -->
                            </select>
                        </div>
                    </div>

                    <!-- Address Type -->
                    <h5 style="margin: 30px 0 20px; color: #333;">Address Type</h5>
                    <div style="margin-bottom: 20px;">
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="addressType" id="home" value="home" checked>
                            <label class="form-check-label" for="home">
                                <i class="fas fa-home"></i> Home
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="addressType" id="work" value="work">
                            <label class="form-check-label" for="work">
                                <i class="fas fa-building"></i> Work
                            </label>
                        </div>
                        <div class="form-check form-check-inline">
                            <input class="form-check-input" type="radio" name="addressType" id="other" value="other">
                            <label class="form-check-label" for="other">
                                <i class="fas fa-map-marker-alt"></i> Other
                            </label>
                        </div>
                    </div>

                    <!-- Default Address -->
                    <div style="margin-bottom: 30px;">
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="isDefault" name="isDefault" value="1" checked>
                            <label class="form-check-label" for="isDefault">
                                Set as default address
                            </label>
                        </div>
                    </div>

                    <!-- Submit Buttons -->
                    <div style="display: flex; gap: 15px; align-items: center;">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Update Address
                        </button>
                        <a href="/address" class="btn btn-outline-secondary">Cancel</a>
                        <button type="button" class="btn btn-outline-danger" onclick="deleteAddress()" style="margin-left: auto;">
                            <i class="fas fa-trash"></i> Delete Address
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <%- include('../partials/_footer') %>

    <script>
        // Form validation
        document.getElementById('editAddressForm').addEventListener('submit', function(e) {
            const requiredFields = ['firstName', 'lastName', 'phone', 'addressLine1', 'city', 'state', 'zipCode', 'country'];
            let isValid = true;

            requiredFields.forEach(field => {
                const input = document.getElementById(field);
                if (!input.value.trim()) {
                    input.style.borderColor = '#dc3545';
                    isValid = false;
                } else {
                    input.style.borderColor = '#ddd';
                }
            });

            if (!isValid) {
                e.preventDefault();
                swal("Error", "Please fill in all required fields.", "error");
            }
        });

        // Phone number formatting
        document.getElementById('phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length >= 6) {
                value = value.replace(/(\d{3})(\d{3})(\d{4})/, '($1) $2-$3');
            } else if (value.length >= 3) {
                value = value.replace(/(\d{3})(\d{0,3})/, '($1) $2');
            }
            e.target.value = value;
        });

        // Delete address function
        function deleteAddress() {
            swal({
                title: "Are you sure?",
                text: "This address will be permanently deleted. This action cannot be undone.",
                icon: "warning",
                buttons: {
                    cancel: {
                        text: "Cancel",
                        value: null,
                        visible: true,
                        className: "",
                        closeModal: true,
                    },
                    confirm: {
                        text: "Delete",
                        value: true,
                        visible: true,
                        className: "",
                        closeModal: true
                    }
                },
                dangerMode: true,
            })
            .then((willDelete) => {
                if (willDelete) {
                    // Add delete functionality here
                    window.location.href = '/address/delete/1';
                }
            });
        }

        function confirmLogout(event) {
            event.preventDefault();
            swal({
                title: "Are you sure?",
                text: "You will be logged out of your account.",
                icon: "warning",
                buttons: {
                    cancel: {
                        text: "Cancel",
                        value: null,
                        visible: true,
                        className: "",
                        closeModal: true,
                    },
                    confirm: {
                        text: "Logout",
                        value: true,
                        visible: true,
                        className: "",
                        closeModal: true
                    }
                },
                dangerMode: true,
            })
            .then((willLogout) => {
                if (willLogout) {
                    window.location.href = '/logout';
                }
            });
        }

        // Mobile Menu Toggle
        document.querySelector('.canvas__open').addEventListener('click', () => {
            document.querySelector('.header__menu').classList.toggle('active');
        });
    </script>
</body>
</html>
